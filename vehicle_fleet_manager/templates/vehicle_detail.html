{% extends "base.html" %}

{% block title %}Vehicle {{ vehicle.plate_number }}{% endblock %}
{% block page_title %}{{ vehicle.make }} {{ vehicle.model }}{% endblock %}
{% block page_subtitle %}Plate {{ vehicle.plate_number }} · {{ vehicle.status }}{% endblock %}

{% block content %}
<div class="detail-layout">
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Vehicle Summary</h2>
            <p class="card-subtitle">Key identifiers and operational status.</p>
        </div>
        <div class="detail-grid">
            <div class="detail-item">
                <div class="detail-label">Plate Number</div>
                <div class="detail-value">{{ vehicle.plate_number }}</div>
            </div>
            <div class="detail-item">
                <div class="detail-label">Make / Model</div>
                <div class="detail-value">{{ vehicle.make }} {{ vehicle.model }}</div>
            </div>
            <div class="detail-item">
                <div class="detail-label">Year</div>
                <div class="detail-value">{{ vehicle.year or '—' }}</div>
            </div>
            <div class="detail-item">
                <div class="detail-label">Driver</div>
                <div class="detail-value">{{ vehicle.driver_name or 'Unassigned' }}</div>
            </div>
            <div class="detail-item">
                <div class="detail-label">Status</div>
                <div class="detail-value">
                    <span class="status-pill status-{{ vehicle.status | lower | replace(' ', '-') }}">
                        {{ vehicle.status }}
                    </span>
                </div>
            </div>
            <div class="detail-item">
                <div class="detail-label">Mileage</div>
                <div class="detail-value">{{ vehicle.mileage or '—' }}</div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Operational Notes</h2>
            <p class="card-subtitle">Context that helps dispatchers and maintenance teams.</p>
        </div>
        {% if vehicle.notes %}
            <p class="notes-text">{{ vehicle.notes }}</p>
        {% else %}
            <p class="notes-text notes-empty">No notes yet. Use this space to track maintenance history, known issues, or route preferences.</p>
        {% endif %}
    </div>
</div>

<div class="detail-footer">
    <a href="{{ url_for('edit_vehicle', vehicle_id=vehicle.id) }}" class="btn btn-secondary">Edit Vehicle</a>

    {% if vehicle.status != 'Retired' %}
    <form method="post"
          action="{{ url_for('retire_vehicle', vehicle_id=vehicle.id) }}"
          class="inline-form"
          onsubmit="return confirm('Mark this vehicle as retired?');">
        <button type="submit" class="btn btn-danger">Mark as Retired</button>
    </form>
    {% endif %}

    <a href="{{ url_for('index') }}" class="btn btn-ghost">Back to Dashboard</a>
</div>
{% endblock %}

